package agent;

import java.io.File;
import java.io.FileOutputStream;

import org.apache.mina.core.buffer.IoBuffer;
import org.apache.mina.core.filterchain.IoFilterAdapter;
import org.apache.mina.core.session.IoSession;

public class FileCacheFilter extends IoFilterAdapter{
	File temp;
	
	public FileCacheFilter(File temp) {
		this.temp = temp;
	}

	@Override
	public void messageReceived(NextFilter nextFilter, IoSession session, Object message) throws Exception {
		if(message instanceof IoBuffer){
			File temp = File.createTempFile(null, ".log");
			LogFile logFile = new LogFile(temp);
			FileOutputStream fos = null;
			byte
			try {
				fos = new FileOutputStream(temp);
				
			}finally {
				if(fos != null){
					fos.close();
				}
			}
			
			nextFilter.messageReceived(session, logFile);
		}
	}
	
}
