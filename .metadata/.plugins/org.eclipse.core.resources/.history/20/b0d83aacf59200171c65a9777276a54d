package adri.logviewer.agent.client;

import java.io.File;
import java.io.FileInputStream;
import java.util.List;

import org.junit.Test;

import adri.logviewer.agent.file.LogFile;

public class ClientAgentTest {
	
	public void essaiAll() throws Exception{
		MinaClient client = new MinaClient();
		Object detail = client.connect("localhost", 2008, "");
		System.out.println(detail);
		List<LogFile> liste = (List<LogFile>)detail;
		for(LogFile f : liste){
			System.out.println(f.getDistantName());
		}
	}
	
	@Test
	public void testClient() throws Exception{
		MinaClient client = new MinaClient();
		Object detail = client.connect("localhost", 2008, "");
		System.out.println(detail);
		List<LogFile> liste = (List<LogFile>)detail;
		if(liste instanceof List){
			LogFile f = liste.get(0);
			System.out.println(f.getFilename());
			File recu = new File("recu.log");
			FileInputStream in = new FileInputStream(recu);
			in.read(f.getFile());
		}
		client.dispose();
	}

}
